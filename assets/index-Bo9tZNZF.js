function E(b,x){for(var t=0;t<x.length;t++){const d=x[t];if(typeof d!="string"&&!Array.isArray(d)){for(const l in d)if(l!=="default"&&!(l in b)){const s=Object.getOwnPropertyDescriptor(d,l);s&&Object.defineProperty(b,l,s.get?s:{enumerable:!0,get:()=>d[l]})}}}return Object.freeze(Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}))}var S={},j={},w={},I;function G(){if(I)return w;I=1,Object.defineProperty(w,"__esModule",{value:!0}),w.loop=w.conditional=w.parse=void 0;var b=function d(l,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:f;if(Array.isArray(s))s.forEach(function(g){return d(l,g,f,p)});else if(typeof s=="function")s(l,f,p,d);else{var u=Object.keys(s)[0];Array.isArray(s[u])?(p[u]={},d(l,s[u],f,p[u])):p[u]=s[u](l,f,p,d)}return f};w.parse=b;var x=function(l,s){return function(f,p,u,g){s(f,p,u)&&g(f,l,p,u)}};w.conditional=x;var t=function(l,s){return function(f,p,u,g){for(var o=[],e=f.pos;s(f,p,u);){var r={};if(g(f,l,p,r),f.pos===e)break;e=f.pos,o.push(r)}return o}};return w.loop=t,w}var y={},O;function L(){if(O)return y;O=1,Object.defineProperty(y,"__esModule",{value:!0}),y.readBits=y.readArray=y.readUnsigned=y.readString=y.peekBytes=y.readBytes=y.peekByte=y.readByte=y.buildStream=void 0;var b=function(e){return{data:e,pos:0}};y.buildStream=b;var x=function(){return function(e){return e.data[e.pos++]}};y.readByte=x;var t=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return function(r){return r.data[r.pos+e]}};y.peekByte=t;var d=function(e){return function(r){return r.data.subarray(r.pos,r.pos+=e)}};y.readBytes=d;var l=function(e){return function(r){return r.data.subarray(r.pos,r.pos+e)}};y.peekBytes=l;var s=function(e){return function(r){return Array.from(d(e)(r)).map(function(i){return String.fromCharCode(i)}).join("")}};y.readString=s;var f=function(e){return function(r){var i=d(2)(r);return e?(i[1]<<8)+i[0]:(i[0]<<8)+i[1]}};y.readUnsigned=f;var p=function(e,r){return function(i,a,n){for(var v=typeof r=="function"?r(i,a,n):r,c=d(e),h=new Array(v),B=0;B<v;B++)h[B]=c(i);return h}};y.readArray=p;var u=function(e,r,i){for(var a=0,n=0;n<i;n++)a+=e[r+n]&&Math.pow(2,i-n-1);return a},g=function(e){return function(r){for(var i=x()(r),a=new Array(8),n=0;n<8;n++)a[7-n]=!!(i&1<<n);return Object.keys(e).reduce(function(v,c){var h=e[c];return h.length?v[c]=u(a,h.index,h.length):v[c]=a[h.index],v},{})}};return y.readBits=g,y}var F;function $(){return F||(F=1,(function(b){Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var x=G(),t=L(),d={blocks:function(r){for(var i=0,a=[],n=r.data.length,v=0,c=(0,t.readByte)()(r);c!==i&&c;c=(0,t.readByte)()(r)){if(r.pos+c>=n){var h=n-r.pos;a.push((0,t.readBytes)(h)(r)),v+=h;break}a.push((0,t.readBytes)(c)(r)),v+=c}for(var B=new Uint8Array(v),k=0,m=0;m<a.length;m++)B.set(a[m],k),k+=a[m].length;return B}},l=(0,x.conditional)({gce:[{codes:(0,t.readBytes)(2)},{byteSize:(0,t.readByte)()},{extras:(0,t.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,t.readUnsigned)(!0)},{transparentColorIndex:(0,t.readByte)()},{terminator:(0,t.readByte)()}]},function(e){var r=(0,t.peekBytes)(2)(e);return r[0]===33&&r[1]===249}),s=(0,x.conditional)({image:[{code:(0,t.readByte)()},{descriptor:[{left:(0,t.readUnsigned)(!0)},{top:(0,t.readUnsigned)(!0)},{width:(0,t.readUnsigned)(!0)},{height:(0,t.readUnsigned)(!0)},{lct:(0,t.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,x.conditional)({lct:(0,t.readArray)(3,function(e,r,i){return Math.pow(2,i.descriptor.lct.size+1)})},function(e,r,i){return i.descriptor.lct.exists}),{data:[{minCodeSize:(0,t.readByte)()},d]}]},function(e){return(0,t.peekByte)()(e)===44}),f=(0,x.conditional)({text:[{codes:(0,t.readBytes)(2)},{blockSize:(0,t.readByte)()},{preData:function(r,i,a){return(0,t.readBytes)(a.text.blockSize)(r)}},d]},function(e){var r=(0,t.peekBytes)(2)(e);return r[0]===33&&r[1]===1}),p=(0,x.conditional)({application:[{codes:(0,t.readBytes)(2)},{blockSize:(0,t.readByte)()},{id:function(r,i,a){return(0,t.readString)(a.blockSize)(r)}},d]},function(e){var r=(0,t.peekBytes)(2)(e);return r[0]===33&&r[1]===255}),u=(0,x.conditional)({comment:[{codes:(0,t.readBytes)(2)},d]},function(e){var r=(0,t.peekBytes)(2)(e);return r[0]===33&&r[1]===254}),g=[{header:[{signature:(0,t.readString)(3)},{version:(0,t.readString)(3)}]},{lsd:[{width:(0,t.readUnsigned)(!0)},{height:(0,t.readUnsigned)(!0)},{gct:(0,t.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,t.readByte)()},{pixelAspectRatio:(0,t.readByte)()}]},(0,x.conditional)({gct:(0,t.readArray)(3,function(e,r){return Math.pow(2,r.lsd.gct.size+1)})},function(e,r){return r.lsd.gct.exists}),{frames:(0,x.loop)([l,p,u,s,f],function(e){var r=(0,t.peekByte)()(e);return r===33||r===44})}],o=g;b.default=o})(j)),j}var U={},D;function K(){if(D)return U;D=1,Object.defineProperty(U,"__esModule",{value:!0}),U.deinterlace=void 0;var b=function(t,d){for(var l=new Array(t.length),s=t.length/d,f=function(i,a){var n=t.slice(a*d,(a+1)*d);l.splice.apply(l,[i*d,d].concat(n))},p=[0,4,2,1],u=[8,8,4,2],g=0,o=0;o<4;o++)for(var e=p[o];e<s;e+=u[o])f(e,g),g++;return l};return U.deinterlace=b,U}var q={},R;function N(){if(R)return q;R=1,Object.defineProperty(q,"__esModule",{value:!0}),q.lzw=void 0;var b=function(t,d,l){var s=4096,f=-1,p=l,u,g,o,e,r,i,a,z,n,v,P,c,A,_,M,C,h=new Array(l),B=new Array(s),k=new Array(s),m=new Array(s+1);for(c=t,g=1<<c,r=g+1,u=g+2,a=f,e=c+1,o=(1<<e)-1,n=0;n<g;n++)B[n]=0,k[n]=n;var P,z,A,_,C,M;for(P=z=A=_=C=M=0,v=0;v<p;){if(_===0){if(z<e){P+=d[M]<<z,z+=8,M++;continue}if(n=P&o,P>>=e,z-=e,n>u||n==r)break;if(n==g){e=c+1,o=(1<<e)-1,u=g+2,a=f;continue}if(a==f){m[_++]=k[n],a=n,A=n;continue}for(i=n,n==u&&(m[_++]=A,n=a);n>g;)m[_++]=k[n],n=B[n];A=k[n]&255,m[_++]=A,u<s&&(B[u]=a,k[u]=A,u++,(u&o)===0&&u<s&&(e++,o+=u)),a=i}_--,h[C++]=m[_],v++}for(v=C;v<p;v++)h[v]=0;return h};return q.lzw=b,q}var T;function X(){if(T)return S;T=1,Object.defineProperty(S,"__esModule",{value:!0}),S.decompressFrames=S.decompressFrame=S.parseGIF=void 0;var b=s($()),x=G(),t=L(),d=K(),l=N();function s(o){return o&&o.__esModule?o:{default:o}}var f=function(e){var r=new Uint8Array(e);return(0,x.parse)((0,t.buildStream)(r),b.default)};S.parseGIF=f;var p=function(e){for(var r=e.pixels.length,i=new Uint8ClampedArray(r*4),a=0;a<r;a++){var n=a*4,v=e.pixels[a],c=e.colorTable[v]||[0,0,0];i[n]=c[0],i[n+1]=c[1],i[n+2]=c[2],i[n+3]=v!==e.transparentIndex?255:0}return i},u=function(e,r,i){if(!e.image){console.warn("gif frame does not have associated image.");return}var a=e.image,n=a.descriptor.width*a.descriptor.height,v=(0,l.lzw)(a.data.minCodeSize,a.data.blocks,n);a.descriptor.lct.interlaced&&(v=(0,d.deinterlace)(v,a.descriptor.width));var c={pixels:v,dims:{top:e.image.descriptor.top,left:e.image.descriptor.left,width:e.image.descriptor.width,height:e.image.descriptor.height}};return a.descriptor.lct&&a.descriptor.lct.exists?c.colorTable=a.lct:c.colorTable=r,e.gce&&(c.delay=(e.gce.delay||10)*10,c.disposalType=e.gce.extras.disposal,e.gce.extras.transparentColorGiven&&(c.transparentIndex=e.gce.transparentColorIndex)),i&&(c.patch=p(c)),c};S.decompressFrame=u;var g=function(e,r){return e.frames.filter(function(i){return i.image}).map(function(i){return u(i,e.gct,r)})};return S.decompressFrames=g,S}var Z=X();const H=E({__proto__:null},[Z]);export{H as i};
